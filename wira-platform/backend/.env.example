# WIRA Platform Backend - Environment Configuration
# Copy this file to .env and update values as needed

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Server port (will auto-detect available port in development)
PORT=3000

# Environment (development | test | staging | production)
NODE_ENV=development

# =============================================================================
# SECURITY
# =============================================================================

# JWT secret for authentication (generate a strong secret for production)
JWT_SECRET=your-super-secret-jwt-key-min-32-characters-long

# Encryption key for sensitive data
ENCRYPTION_KEY=your-32-character-encryption-key-123456

# Rate limiting configuration
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

# Comma-separated list of allowed origins in production
# Example: https://wira.org,https://admin.wira.org
CORS_ORIGIN=http://localhost:3000,http://localhost:5173

# Additional frontend development ports (comma-separated)
# These ports will be automatically allowed in development
DEV_FRONTEND_PORTS=5173,5174,3000,3001

# Logging
LOG_LEVEL=info
LOG_FILE=logs/app.log

# Cache (Redis DISABLED - backend operates without cache)
# REDIS_URL=redis://localhost:6379
# REDIS_PASSWORD=

# Note: Cache is disabled to simplify deployment and reduce dependencies.
# All operations will work directly with the SQLite database.

# USSD Configuration
USSD_SESSION_TIMEOUT_MS=300000
USSD_SHORTCODE=*123#

# SMS Integration (Africa's Talking - futuro)
SMS_API_KEY=your-africas-talking-api-key
SMS_USERNAME=your-username
SMS_SENDER=WIRA

# Email (para certificados)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# =============================================================================
# PORT MANAGEMENT GUIDE
# =============================================================================

# Development Port Allocation:
# - 3000-3009: Main development instances
# - 3010-3019: Testing environments
# - 3020-3029: Staging environments
# - 4000-4099: Production services
#
# Examples:
# npm run dev          # Auto-detects available port (starts at 3000)
# npm run dev:3001     # Force port 3001
# npm run dev:3002     # Force port 3002
# npm run dev:multi    # Run multiple instances (3000, 3001)
#
# Frontend Port Integration:
# The backend will automatically allow CORS from common frontend ports:
# - 5173, 5174 (Vite development servers)
# - 3000, 3001 (alternative frontend ports)
# - Any ports specified in DEV_FRONTEND_PORTS

# =============================================================================
# DEVELOPMENT TIPS
# =============================================================================

# 1. Port Conflicts:
# If port 3000 is occupied, the server will automatically find the next
# available port (3001, 3002, etc.) and log the change.

# 2. CORS Issues:
# The CORS configuration automatically adapts to the detected port.
# Add custom frontend ports to DEV_FRONTEND_PORTS if needed.

# 3. Multiple Instances:
# Use "npm run dev:multi" to run multiple backend instances for testing
# microservices or load balancing scenarios.

# 4. Production:
# Set NODE_ENV=production to use fixed port configuration and
# security-hardened CORS settings.